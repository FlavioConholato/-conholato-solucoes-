<script>
function converter() {
  let texto = document.getElementById("entrada").value;

  // üî• Limpeza do texto: remover blocos desnecess√°rios
  texto = texto.replace(/LAN√áADO PELO APLICATIVO[\s\S]*?registro:[^\n]*\n/i, '');
  texto = texto.replace(/Apreens√µes[\s\S]*?Meios Utilizados[\s\S]*?Ve√≠culos Envolvidos/, '');
  texto = texto.replace(/Comunica√ß√£o de Ocorr√™ncia Policial[\s\S]*?registro:[^\n]*\n/i, '');
  texto = texto.replace(/Endere√ßo[\s\S]*?Guarni√ß√£o\/Policiamento/, '');
  texto = texto.replace(/Envolvidos[\s\S]*?Brat/, '');
  texto = texto.replace(/Brat[\s\S]*?Condutor:/, '');

  // Extrair Din√¢mica
  let historico = "---";
  const dinamicaMatch = texto.match(/Declara√ß√£o:\s*(.*)/i);
  if (dinamicaMatch) {
    historico = dinamicaMatch[1].trim();
  }

  // Extrair Observa√ß√µes (ap√≥s a din√¢mica, qualquer coisa extra pode ser tratada como observa√ß√£o)
  let observacoes = "---";
  const obsMatch = texto.match(/Condutor:[^\n]*\n([\s\S]*)/i);
  if (obsMatch) {
    observacoes = obsMatch[1].trim();
  }

  const textoY = `SECRETARIA DE ESTADO DE POL√çCIA MILITAR

COMANDO DE POLICIAMENTO RODOVI√ÅRIO (CPRv)

5¬™ CTRv - POSTO PPRv


TERMINO DE OCORR√äNCIA

DATA: 

HORA INICIAL: 
HORA FINAL:  

LOCAL: 


LINK GEORREFERENCIADO:


C√ìD. INICIAL: 

C√ìD. FINAL: 

BOPM: CPRV
RO: 
DP:  
BRAT:
Protocolo: 

QUALIFICADOS:

A1:
CPF: 
CNH:
CAT:
VAL: 
DN: 
BAM: 


VE√çCULO ENVOLVIDO: 

(V1) 
MARCA/MODELO: 
PLACA: 
COR: 
ANO: 

EQUIPE: 

VTR: 

DIN√ÇMICA / HIST√ìRICO:
${historico}

OBSERVA√á√ïES:
${observacoes}
`;

  document.getElementById("saida").value = textoY;
}
</script>
